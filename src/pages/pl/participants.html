<article class="content">
  <h1>Uczestnicy</h1>

  <p>Liczba zarejestrowanych uczestników: <span class="vistors-number">{{ visitors.length }}</span>.</p>

  <div class="row registration-button" ng-show="registrationButtonVisible">
    <div class="col-xs-12 col-sm-4">
      <button type="submit" class="btn btn-danger" ng-click="openRegistrationForm()">Chcę się zarejestrować!</button>
    </div>
  </div>

  <div class="row registration-form" ng-show="registrationFormVisible">
    <div class="col-xs-12 col-sm-8 col-sm-offset-2">
      <form autocomplete="off">
        <div class="form-group">
          <label for="handle">Ksywa <span class="required">(wymagana)</span></label>
          <input type="text" class="form-control" id="handle" placeholder="Podaj ksywę, pseudonim (lub imię)" ng-model="user.handle">
        </div>
        <div class="form-group">
          <label for="group">Grupa</label>
          <input type="text" class="form-control" id="group" placeholder="Grupa (grupy)" ng-model="user.group">
          <p class="help-block">Nie jesteś w żadnej grupie? Nic nie szkodzi; pozostaw puste pole.</p>
        </div>
        <div class="form-group">
          <label for="exampleInputEmail1">E-mail <span class="required">(wymagany)</span></label>
          <input type="email" class="form-control" id="exampleInputEmail1" placeholder="Email" ng-model="user.email">
          <p class="help-block">Jeśli posiadasz konto w serwisie Gravatar, wyświetlimy Twój awatar w oparciu o powyższy adres.</p>
        </div>
        <div class="form-group">
          <label for="exampleInputPassword1">Hasło <span class="required">(wymagane)</span></label>
          <input type="password" class="form-control" id="exampleInputPassword1" placeholder="Hasło" ng-model="user.password">
        </div>
        <div class="form-group">
          <label for="country">Kraj</label>
          <select id="country" class="form-control" ng-model="user.country">
            <option value="AF">Afganistan</option><option value="AL">Albania</option><option value="DZ">Algieria</option><option value="AD">Andora</option><option value="AO">Angola</option><option value="AI">Anguilla</option><option value="AQ">Antarktyka</option><option value="AG">Antigua i Barbuda</option><option value="SA">Arabia Saudyjska</option><option value="AR">Argentyna</option><option value="AM">Armenia</option><option value="AW">Aruba</option><option value="AU">Australia</option><option value="AT">Austria</option><option value="AZ">Azerbejdżan</option><option value="BS">Bahamy</option><option value="BH">Bahrajn</option><option value="BD">Bangladesz</option><option value="BB">Barbados</option><option value="BE">Belgia</option><option value="BZ">Belize</option><option value="BJ">Benin</option><option value="BM">Bermudy</option><option value="BT">Bhutan</option><option value="BY">Białoruś</option><option value="BO">Boliwia</option><option value="BA">Bośnia i Hercegowina</option><option value="BW">Botswana</option><option value="BR">Brazylia</option><option value="BN">Brunei Darussalam</option><option value="IO">Brytyjskie Terytorium Oceanu Indyjskiego</option><option value="VG">Brytyjskie Wyspy Dziewicze</option><option value="BG">Bułgaria</option><option value="BF">Burkina Faso</option><option value="BI">Burundi</option><option value="EA">Ceuta i Melilla</option><option value="CL">Chile</option><option value="CN">Chiny</option><option value="HR">Chorwacja</option><option value="CI">C&ocirc;te d&rsquo;Ivoire</option><option value="CW">Cura&ccedil;ao</option><option value="CY">Cypr</option><option value="TD">Czad</option><option value="ME">Czarnog&oacute;ra</option><option value="CZ">Czechy</option><option value="UM">Dalekie Wyspy Mniejsze Stan&oacute;w Zjednoczonych</option><option value="DK">Dania</option><option value="CD">Demokratyczna Republika Konga</option><option value="DG">Diego Garcia</option><option value="DM">Dominika</option><option value="DO">Dominikana</option><option value="DJ">Dżibuti</option><option value="EG">Egipt</option><option value="EC">Ekwador</option><option value="ER">Erytrea</option><option value="EE">Estonia</option><option value="ET">Etiopia</option><option value="FK">Falklandy</option><option value="FJ">Fidżi</option><option value="PH">Filipiny</option><option value="FI">Finlandia</option><option value="FR">Francja</option><option value="TF">Francuskie Terytoria Południowe</option><option value="GA">Gabon</option><option value="GM">Gambia</option><option value="GS">Georgia Południowa i Sandwich Południowy</option><option value="GH">Ghana</option><option value="GI">Gibraltar</option><option value="GR">Grecja</option><option value="GD">Grenada</option><option value="GL">Grenlandia</option><option value="GE">Gruzja</option><option value="GU">Guam</option><option value="GY">Gujana</option><option value="GF">Gujana Francuska</option><option value="GP">Gwadelupa</option><option value="GT">Gwatemala</option><option value="GN">Gwinea</option><option value="GW">Gwinea Bissau</option><option value="GQ">Gwinea R&oacute;wnikowa</option><option value="HT">Haiti</option><option value="ES">Hiszpania</option><option value="NL">Holandia</option><option value="HN">Honduras</option><option value="IN">Indie</option><option value="ID">Indonezja</option><option value="IQ">Irak</option><option value="IR">Iran</option><option value="IE">Irlandia</option><option value="IS">Islandia</option><option value="IL">Izrael</option><option value="JM">Jamajka</option><option value="JP">Japonia</option><option value="YE">Jemen</option><option value="JO">Jordania</option><option value="KY">Kajmany</option><option value="KH">Kambodża</option><option value="CM">Kamerun</option><option value="CA">Kanada</option><option value="QA">Katar</option><option value="KZ">Kazachstan</option><option value="KE">Kenia</option><option value="KG">Kirgistan</option><option value="KI">Kiribati</option><option value="CO">Kolumbia</option><option value="KM">Komory</option><option value="CG">Kongo</option><option value="KR">Korea Południowa</option><option value="KP">Korea P&oacute;łnocna</option><option value="XK">Kosowo</option><option value="CR">Kostaryka</option><option value="CU">Kuba</option><option value="KW">Kuwejt</option><option value="LA">Laos</option><option value="LS">Lesotho</option><option value="LB">Liban</option><option value="LR">Liberia</option><option value="LY">Libia</option><option value="LI">Liechtenstein</option><option value="LT">Litwa</option><option value="LU">Luksemburg</option><option value="LV">Łotwa</option><option value="MK">Macedonia</option><option value="MG">Madagaskar</option><option value="YT">Majotta</option><option value="MW">Malawi</option><option value="MV">Malediwy</option><option value="MY">Malezja</option><option value="ML">Mali</option><option value="MT">Malta</option><option value="MP">Mariany P&oacute;łnocne</option><option value="MA">Maroko</option><option value="MQ">Martynika</option><option value="MR">Mauretania</option><option value="MU">Mauritius</option><option value="MX">Meksyk</option><option value="FM">Mikronezja</option><option value="MM">Mjanma (Birma)</option><option value="MD">Mołdawia</option><option value="MC">Monako</option><option value="MN">Mongolia</option><option value="MS">Montserrat</option><option value="MZ">Mozambik</option><option value="NA">Namibia</option><option value="NR">Nauru</option><option value="NP">Nepal</option><option value="BQ">Niderlandy Karaibskie</option><option value="DE">Niemcy</option><option value="NE">Niger</option><option value="NG">Nigeria</option><option value="NI">Nikaragua</option><option value="NU">Niue</option><option value="NF">Norfolk</option><option value="NO">Norwegia</option><option value="NC">Nowa Kaledonia</option><option value="NZ">Nowa Zelandia</option><option value="OM">Oman</option><option value="PK">Pakistan</option><option value="PW">Palau</option><option value="PA">Panama</option><option value="PG">Papua-Nowa Gwinea</option><option value="PY">Paragwaj</option><option value="PE">Peru</option><option value="PN">Pitcairn</option><option value="PF">Polinezja Francuska</option><option value="PL">Polska</option><option value="PR">Portoryko</option><option value="PT">Portugalia</option><option value="ZA">Republika Południowej Afryki</option><option value="CF">Republika Środkowoafrykańska</option><option value="CV">Republika Zielonego Przylądka</option><option value="RE">Reunion</option><option value="RU">Rosja</option><option value="RO">Rumunia</option><option value="RW">Rwanda</option><option value="EH">Sahara Zachodnia</option><option value="KN">Saint Kitts i Nevis</option><option value="LC">Saint Lucia</option><option value="VC">Saint Vincent i Grenadyny</option><option value="BL">Saint-Barth&eacute;lemy</option><option value="MF">Saint-Martin</option><option value="PM">Saint-Pierre i Miquelon</option><option value="SV">Salwador</option><option value="WS">Samoa</option><option value="AS">Samoa Amerykańskie</option><option value="SM">San Marino</option><option value="SN">Senegal</option><option value="RS">Serbia</option><option value="SC">Seszele</option><option value="SL">Sierra Leone</option><option value="SG">Singapur</option><option value="SX">Sint Maarten</option><option value="SK">Słowacja</option><option value="SI">Słowenia</option><option value="SO">Somalia</option><option value="HK">SRA Hongkong (Chiny)</option><option value="MO">SRA Makau (Chiny)</option><option value="LK">Sri Lanka</option><option value="US">Stany Zjednoczone</option><option value="SZ">Suazi</option><option value="SD">Sudan</option><option value="SS">Sudan Południowy</option><option value="SR">Surinam</option><option value="SJ">Svalbard i Jan Mayen</option><option value="SY">Syria</option><option value="CH">Szwajcaria</option><option value="SE">Szwecja</option><option value="TJ">Tadżykistan</option><option value="TH">Tajlandia</option><option value="TW">Tajwan</option><option value="TZ">Tanzania</option><option value="PS">Terytoria Palestyńskie</option><option value="TL">Timor Wschodni</option><option value="TG">Togo</option><option value="TK">Tokelau</option><option value="TO">Tonga</option><option value="TA">Tristan da Cunha</option><option value="TT">Trynidad i Tobago</option><option value="TN">Tunezja</option><option value="TR">Turcja</option><option value="TM">Turkmenistan</option><option value="TC">Turks i Caicos</option><option value="TV">Tuvalu</option><option value="UG">Uganda</option><option value="UA">Ukraina</option><option value="UY">Urugwaj</option><option value="UZ">Uzbekistan</option><option value="VU">Vanuatu</option><option value="WF">Wallis i Futuna</option><option value="VA">Watykan</option><option value="VE">Wenezuela</option><option value="HU">Węgry</option><option value="GB">Wielka Brytania</option><option value="VN">Wietnam</option><option value="IT">Włochy</option><option value="CX">Wyspa Bożego Narodzenia</option><option value="GG">Wyspa Guernsey</option><option value="JE">Wyspa Jersey</option><option value="IM">Wyspa Man</option><option value="SH">Wyspa Świętej Heleny</option><option value="AC">Wyspa Wniebowstąpienia</option><option value="AX">Wyspy Alandzkie</option><option value="CK">Wyspy Cooka</option><option value="VI">Wyspy Dziewicze Stan&oacute;w Zjednoczonych</option><option value="IC">Wyspy Kanaryjskie</option><option value="CC">Wyspy Kokosowe</option><option value="MH">Wyspy Marshalla</option><option value="FO">Wyspy Owcze</option><option value="SB">Wyspy Salomona</option><option value="ST">Wyspy Świętego Tomasza i Książęca</option><option value="ZM">Zambia</option><option value="ZW">Zimbabwe</option><option value="AE">Zjednoczone Emiraty Arabskie</option>
          </select>
        </div>
        <div class="form-group">
          <p class="help-block">
            Zachowaj, proszę, Twój adres <strong>e-mail</strong> i <strong>hasło</strong> w bezpiecznym miejscu.
            Wkrótce udostępnimy możliwość logowania się na stronie, a dla osób, które zalogują się, szykujemy miłą niespodziankę!
          </p>
          <p class="help-block">
            Kłopoty z rejestracją? <a href="mailto:contact@riverwash.org">Napisz do nas</a>.
          </p>
        </div>
        <button type="submit" class="btn btn-danger" ng-click="submitRegistrationForm(user)">Dopisz mnie do listy!</button>
      </form>

    </div>
  </div>

  <h2>Zarejestrowani uczestnicy</h2>

  <div class="row registration-list">
    <div class="col-xs-12 col-sm-8 col-sm-offset-2">
      <div class="row" ng-repeat="visitor in visitors" ng-if="visitors">
        <div class="col-xs-2 col-sm-2 col-md-1 col visitor-image">
          <img ng-if="visitor.image" ng-src="{{ visitor.image }}">
        </div>
        <div class="col-xs-8 col-sm-6 col-md-7 col"><p>{{ $index + 1 }}. {{ visitor.handle }}<span class="visitor-group" ng-if="visitor.group"> / {{ visitor.group }}</span></p></div>
        <div class="col-xs-2 col-sm-4 col country"><p>{{ visitor.country }}</p></div>
      </div>
      <div ng-if="!visitors">
        <p>Nie ma jeszcze zarejestrowanych uczestników. Bądź pierwszym!</p>
      </div>

    </div>
  </div>

</article>

<div class="modal fade" tabindex="-1" role="dialog" id="registrationFailedModal">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
        <h4 class="modal-title">Rejestracja nieudana!</h4>
      </div>
      <div class="modal-body">
        <p>
          Podczas rejestracji nastąpił błąd. Albo nie wypełniono poprawnie wszystkich pól, albo wykopyrtnął się serwer.
          Jeśli sytuacja będzie się powtarzać, <a href="mailto:contact@riverwash.org">napisz do nas</a>.
        </p>
        <div class="alert alert-danger" role="alert" ng-if="errorMessage"><p><strong>Błąd:</strong> {{ errorMessage }}</p></div>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-danger" data-dismiss="modal">No cóż, trudno</button>
      </div>
    </div>
  </div>
</div>